var addressSearchForm="",lastIdField="",searchTermField="",addressTable="",addressIdField="",selectedAddressContainer="",selectedAddressValueContainer="",addressLookupTableBody="";
function initialiseAddressFinder(b,a,d,c,e,f,g,h){addressSearchForm=$("#"+b);lastIdField=$("#"+a);searchTermField=$("#"+d);addressTable=$("#"+c);addressIdField=$("#"+e);selectedAddressContainer=$("#"+f);selectedAddressValueContainer=$("#"+g);addressLookupTableBody=$("#"+h);addressSearchForm.submit(function(a){a.preventDefault();LookUp(1)})}function FindNextAddresses(b,a){lastIdField.val(b);searchTermField.val(a);LookUp(0)}
function RetrieveAddress(b,a){$("#address-results").hide();addressTable.stop().fadeOut("fast",function(){addressIdField.val(b);selectedAddressContainer.fadeIn("fast");selectedAddressValueContainer.html(a)})}
function LookUp(b){loader(!0);$("#address-error").hide();addressTable.stop().fadeOut("fast");selectedAddressContainer.fadeOut("fast");selectedAddressValueContainer.empty();1==b&&lastIdField.val("");$.getJSON("https://services.postcodeanywhere.co.uk/CapturePlus/Interactive/Find/v2.10/json3.ws?callback=?",{Key:"DP67-TX78-UW19-AJ18",SearchTerm:searchTermField.val(),LastId:lastIdField.val(),SearchFor:"Everything",Country:$("#country").val(),LanguagePreference:"EN",MaxSuggestions:"20",MaxResults:"300"},
function(a){1==a.Items.length&&"undefined"!=typeof a.Items[0].Error?($("#address-error").html("No results found").fadeIn("fast"),loader(!1)):0==a.Items.length?($("#address-error").html("No results found").fadeIn("fast"),loader(!1)):(addressLookupTableBody.empty(),$(a.Items).each(function(a,c){var b=c.Text.replace(/'/g,"\\&apos;"),b='<tr style="cursor: pointer;" onclick="'+("Find"==c.Next?"FindNextAddresses('"+c.Id+"','"+b+"')":"RetrieveAddress('"+c.Id+"','"+b+"')")+'"><td>'+c.Text+"</td><td>"+c.Description+
"</td></tr>";$("#address-results").show();addressLookupTableBody.append(b);addressTable.stop().fadeIn("fast");loader(!1)}))})};
