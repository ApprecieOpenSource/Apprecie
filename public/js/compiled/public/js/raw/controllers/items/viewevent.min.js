$(document).ready(function(){$("#share-portal").change(function(){getPortalOrganisations($(this).val())})});function getPortalOrganisations(a){$("#curate-organisation-role").empty();$.when(AjaxGetPortalOrganisations(a)).then(function(a){$.each(a,function(a,b){var c='<tr><td><input type="checkbox" name="organisations[]" value="'+b.organisationId+'"/> '+b.organisationName+"</td></tr>";$("#curate-organisation-role").append(c)});$("#curate-organisation-role-table").show()})}
function AjaxGetPortalOrganisations(a){return $.ajax({url:"/api/getPortalOrganisations/"+a+"/true",type:"post",dataType:"json",cache:!1,data:{CSRF_SESSION_TOKEN:CSRF_SESSION_TOKEN}})}function CurateToRolesInOrganisation(){$("#curate-roles-btn").prop("disabled",!0).html("Adding...");$.when(AjaxCurateToRolesInOrganisation()).then(function(a){$("#curate-roles-btn").prop("disabled",!1).html("Add");location.reload()})}
function AjaxCurateToRolesInOrganisation(){return $.ajax({url:"/items/AjaxCurateToRolesInOrganisation/"+itemId,type:"post",dataType:"json",cache:!1,data:$("#curate-roles-form").serialize()})}
function Approve(a){$("#approve-item-confirm-btn").prop("disabled",!0);a=new approveItem(a,$("#administration-fee").val(),$("#reservation-fee").val(),$("#reservation-period").val(),$("#reservation-toggle").is(":checked"));$.when(a.fetch()).then(function(a){"success"!==a.status?($("#approval-success").stop().hide(),$("#approval-failed-x").stop().hide().html(a.message).fadeIn("fast"),$("#approve-item-confirm-btn").prop("disabled",!1)):($("#approval-failed-x").stop().hide(),$("#approval-success").stop().hide().html(a.message).fadeIn("fast"),
$("#approval-group").hide(),$("#curation-group").show(),$("#approve-item").modal("hide"));$("#approve-item-confirm-btn").prop("disabled",!1)})}
function ApproveEdit(a){$("#approve-edit-item-confirm-btn").prop("disabled",!0);a=new approveItem(a,$("#administration-fee-edit").val(),$("#reservation-fee-edit").val(),$("#reservation-period-edit").val(),$("#reservation-toggle-edit").is(":checked"));$.when(a.fetch()).then(function(a){"success"!==a.status?($("#approval-success").stop().hide(),$("#approval-failed-x-edit").stop().hide().html(a.message).fadeIn("fast"),$("#approve-edit-btn").prop("disabled",!1)):($("#approval-failed-x-edit").stop().hide(),
$("#approval-success").stop().hide().html(a.message).fadeIn("fast"),$("#curation-group").show(),$("#approve-edit-item").modal("hide"));$("#approve-edit-item-confirm-btn").prop("disabled",!1)})}
function Reject(a){$("#reject-item-confirm-btn").prop("disabled",!0);a=new rejectItem(a,$("#reject-reason").val());$.when(a.fetch()).then(function(a){"failed"==a.status?($("#approval-success").stop().hide(),$("#approval-failed").stop().hide().html(a.message).fadeIn("fast")):($("#approval-failed").stop().hide(),$("#approval-success").stop().hide().html(a.message).fadeIn("fast"),$("#approval-group").hide());$("#reject-item").modal("toggle");$("#reject-item-confirm-btn").prop("false",!0);console.log(a)})}
;
