$(document).ready(function(){var b=$("#send-registration"),a=$("#generate-link"),c=$("#remove-link"),g=$("#registration-link"),d=$("#registration-link-container"),h=$("#portal-access-success"),f=$("#portal-access-error");h.hide();f.hide();a.click(function(){h.hide();f.hide();a.prop("disabled",!0).html("Processing...");$.ajax({url:"/people/AjaxGenerateRegistrationLink/"+userId,type:"post",dataType:"json",data:{CSRF_SESSION_TOKEN:CSRF_SESSION_TOKEN},cache:!1}).done(function(e){"success"===e.result?
(a.hide(),a.html("Grant Portal Access"),a.prop("disabled",!1),c.show(),hasEmail&&b.show(),g.val(e.registration),d.show()):"failed"===e.result&&e.message&&(a.html("Grant Portal Access"),f.html(e.message).show())})});c.click(function(){h.hide();f.hide();c.prop("disabled",!0).html("Removing...");$.ajax({url:"/people/AjaxRemoveRegistrationLink/"+userId,type:"post",dataType:"json",data:{CSRF_SESSION_TOKEN:CSRF_SESSION_TOKEN},cache:!1}).done(function(e){"success"===e.result&&(c.hide(),c.html("Remove Pending Portal Access"),
c.prop("disabled",!1),a.show(),hasEmail&&b.hide(),d.hide(),g.val(""))})});g.on("click",function(){$(this).select()})});
function sendSignUp(){var b=$("#portal-access-success"),a=$("#portal-access-error");b.hide();a.hide();var c=$("#send-registration");c.prop("disabled",!0).html("Sending...");$.ajax({url:"/people/sendsignup",type:"post",dataType:"json",cache:!1,data:{portalId:portalId,userId:userId,CSRF_SESSION_TOKEN:CSRF_SESSION_TOKEN}}).done(function(){c.prop("disabled",!1).html("Send Sign-up Email");b.html("Email sent.").show()})}function ItemSearchShow(){$("#item-search").toggle("fast","linear")}
function RelationshipSearchShow(){$("#relationship-search").toggle("fast","linear")}function deactivate(b){var a=new DeactivateUser;a.setUserId(b);$.when(a.fetch()).then(function(c){var a=$("#activation-error"),b=$("#activation-success");"success"==c.status?(a.stop().hide(),b.stop().hide().html(c.message).fadeIn("fast"),$("#activate-btn").show(),$("#deactivate-btn").hide()):(b.stop().hide(),a.stop().hide().html(c.message).fadeIn("fast"),$("#activate-btn").hide(),$("#deactivate-btn").show())})}
function activate(b){var a=new ActivateUser;a.setUserId(b);$.when(a.fetch()).then(function(a){var b=$("#activation-error"),d=$("#activation-success");"success"==a.status?(b.stop().hide(),d.stop().hide().html(a.message).fadeIn("fast"),$("#activate-btn").hide(),$("#deactivate-btn").show()):(d.stop().hide(),b.stop().hide().html(a.message).fadeIn("fast"),$("#activate-btn").show(),$("#deactivate-btn").hide())})}
function deleteUser(b){var a=new DeleteUser;a.setUserId(b);$.when(a.fetch()).then(function(a){var b=$("#delete-error"),d=$("#delete-success");"success"==a.status?window.location.href="/people":(d.stop().hide(),b.stop().hide().html(a.message).fadeIn("fast"),$("#delete-btn").hide(),$("#delete-btn").show())})};
