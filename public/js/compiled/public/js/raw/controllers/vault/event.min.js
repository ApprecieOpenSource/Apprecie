function shareItem(){$("#share-error").stop().fadeOut("fast");$.when(shareItemAjax()).then(function(a){$("#share-success").stop().fadeOut("fast").fadeIn("fast")})}function shareItemAjax(){return $.ajax({url:"/vault/share/"+eventId,type:"post",dataType:"json",cache:!1,data:$("#share-form").serialize()})}
function PlaceOrder(a,b){$("#place-order-btn").prop("disabled",!0);$.when(AjaxPlaceOrder($("#package-quantity").val(),a,b)).then(function(a){"success"==a.status?window.location.href="/payment/index/"+a.orderid:(alert(a.message),$("#place-order-btn").prop("disabled",!1))})}function CancelOrder(a){$("#cancel-order-btn").prop("disabled",!0);$.when(AjaxCancelOrder(a)).then(function(a){"success"==a.status?window.location.reload():(alert(a.message),$("#cancel-order-btn").prop("disabled",!1))})}
function AjaxCancelOrder(a){return $.ajax({url:"/vault/AjaxCancelOrder/",type:"post",dataType:"json",cache:!1,data:{orderId:a,CSRF_SESSION_TOKEN:CSRF_SESSION_TOKEN}})}function AjaxPlaceOrder(a,b,c){return $.ajax({url:"/vault/AjaxPurchaseItem/"+c,type:"post",dataType:"json",cache:!1,data:{reserve:b,quantity:a,CSRF_SESSION_TOKEN:CSRF_SESSION_TOKEN}})}
function sendSuggestion(a){var b=new suggestItem(a),c=$("#suggest-success-box"),d=$("#suggest-error-box");$("#suggest-btn").prop("disabled",!0);0!=usersearch.getSelectedUsers().length?($.each(usersearch.getSelectedUsers(),function(a,c){b.addUser(c.userId)}),$.when(b.fetch()).then(function(a){"success"==a.status?(usersearch.reset(),d.stop().hide(),c.stop().hide().html(a.message).fadeIn("fast")):(c.stop().hide(),d.stop().hide().html(a.message).fadeIn("fast"));$("#suggest-btn").prop("disabled",!1)})):
$("#suggest-btn").prop("disabled",!1)}
function sendExternalSuggestion(a){a=new SuggestItemExternal(a,$("#suggest-email").val());var b=$("#suggest-ext-success-box"),c=$("#suggest-ext-error-box");$("#suggest-ext-btn").prop("disabled",!0);a.validate()?$.when(a.fetch()).then(function(a){"success"==a.status?(usersearch.reset(),c.stop().hide(),b.stop().hide().html(a.message).fadeIn("fast")):(b.stop().hide(),c.stop().hide().html(a.message).fadeIn("fast"));$("#suggest-ext-btn").prop("disabled",!1)}):(b.stop().hide(),c.stop().hide().html("You must provide an email address").fadeIn("fast"),
$("#suggest-ext-btn").prop("disabled",!1))};
