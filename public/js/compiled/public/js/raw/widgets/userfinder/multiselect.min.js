var multiselect=function(){var e=null,c=[];this.role="All";var d=null;this.setRole=function(b){this.role=b};this.getRole=function(){return this.role};this.initialise=function(){d=new CurrentUserChildren;d.setRole(this.getRole());$.when(d.fetch()).then(function(b){e=b;f()})};this.reset=function(){$("#selected-tbl").empty();$("#available-tbl").empty();c=[];f()};var f=function(){var b="";$.each(e.items,function(c,a){"active"==a.status&&(b+='<tr class="clickable" id="available-user-'+a.userId+'" onclick="usersearch.selectUser('+
c+",'#available-user-"+a.userId+"')\"><td>"+a.profile.firstname+" "+a.profile.lastname+"</td><td>"+a.role+"</td></tr>")});$("#available-tbl").html(b)};this.selectUser=function(b,d){if(-1==$.inArray(b,c)){c.push(b);var a=e.items[b],g='<tr class="clickable" style="display:none;" id="user-'+a.userId+'" onclick="usersearch.removeUser('+b+",'#user-"+a.userId+"')\"><td>"+a.profile.firstname+" "+a.profile.lastname+"</td><td>"+a.role+"</td></tr>";$("#selected-tbl").append(g);$("#user-"+a.userId).fadeIn("fast")}$(d).fadeOut("fast")};
this.removeUser=function(b,d){var a=e.items[b];c=$.grep(c,function(a){return a!=b});$("#user-"+a.userId).fadeOut("fast",function(){$("#user-"+a.userId).remove();$("#available-user-"+a.userId).fadeIn("fast")})};this.getSelectedUsers=function(){var b=[];$.each(c,function(c,a){b.push(e.items[a])});return b}};
