var userLookupVisibilityRoleId=null,userLookupRoleId=null,userLookupPortalId=null,userLookupFirstName=null,userLookupLastName=null,userLookupOrganisationId=null;function initialiseUserLookup(a,c,b){setUserLookupPortalId(c);setUserLookupVisibilityRoleId(a);setUserLookupVisibilityOrganisationId(b)}function setUserLookupVisibilityRoleId(a){userLookupVisibilityRoleId=a}function setUserLookupVisibilityOrganisationId(a){userLookupOrganisationId=a}function setUserLoopupRoleID(a){userLookupRoleId=a}
function setUserLookupPortalId(a){userLookupPortalId=a}function setUserLookupFirstName(a){userLookupFirstName=a}function setUserLookupLastName(a){userLookupLastName=a}
function getUserLookupResults(){console.log(userLookupPortalId);return $.ajax({url:"/api/userLookup",type:"post",dataType:"json",cache:!1,data:{roleId:userLookupRoleId,portalId:userLookupPortalId,firstName:userLookupFirstName,lastName:userLookupLastName,organisationId:userLookupOrganisationId,CSRF_SESSION_TOKEN:CSRF_SESSION_TOKEN}})}
function populateRoleSelection(){$("#user-lookup-role").empty();var a=getRoleVisibility();$(a).each(function(a,b){$("#user-lookup-role").append('<option value="'+b+'">'+b+"</option>")})}
function performUserLookup(){setUserLoopupRoleID($("#user-lookup-role").val());setUserLookupFirstName($("#user-lookup-first-name").val());setUserLookupLastName($("#user-lookup-last-name").val());loader(!0);$.when(getUserLookupResults()).then(function(a){$("#user-lookup-results-table").empty();$(a).each(function(a,b){var d='<tr onclick="selectUser('+b.userId+",'"+escapeHtml(b.firstname+" "+b.lastname)+"')\"><td>"+b.reference+"</td><td>"+b.firstname+"</td><td>"+b.lastname+'</td><td class="hidden-xs">'+
b.email+"</td></tr>";$("#user-lookup-results-table").append(d);$("#user-lookup-table").show()});loader(!1)})}function selectUser(a,c){$("#user-lookup-value").val(a);$("#user-lookup-name").val(c);$("#myModal").modal("toggle")}
function getRoleVisibility(){switch(userLookupVisibilityRoleId){case "SystemAdministrator":return[["SystemAdministrator"]];case "PortalAdministrator":return["SystemAdministrator","PortalAdministrator"];case "Manager":return["SystemAdministrator","PortalAdministrator"];case "Internal":return["SystemAdministrator","PortalAdministrator","Manager"];case "ApprecieSupplier":return["SystemAdministrator","PortalAdministrator"];case "AffiliateSupplier":return["SystemAdministrator","PortalAdministrator"];case "Client":return["SystemAdministrator",
"PortalAdministrator","Manager","Internal"]}};
