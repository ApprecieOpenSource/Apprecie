var lookupUsers=[];function UserLookupAdvancedInit(a,b){populateOwnerRoleSelection(a)}
function getOwnerRules(a){switch(a){case "PortalAdministrator":return[["PortalAdministrator","Organisation Owner"]];case "Manager":return[["PortalAdministrator","Organisation Owner"]];case "Internal":return[["Manager","Manager"]];case "Client":return[["Manager","Manager"],["Internal","Internal"]];case "ApprecieSupplier":return[["PortalAdministrator","Organisation Owner"]];case "AffiliateSupplier":return[["PortalAdministrator","Organisation Owner"]]}}
function populateOwnerRoleSelection(a){-2==a&&(a="Manager");a=getOwnerRules(a);$("#user-lookup-role").empty();$.each(a,function(a,c){$("#user-lookup-role").append('<option value="'+c[0]+'">'+c[1]+"</option>")})}
function UserLookupAdvancedSearch(a){$("#user-lookup-results-table").empty();var b=$("#search-widget-btn");b.prop("disabled",!0);$.when(AjaxUserLookupAdvancedSearch(a)).then(function(a){lookupUsers=a;$.each(a,function(a,b){var c='<tr onclick="selectUser('+b.userId+","+a+')"><td>'+b.reference+"</td><td>"+b.firstname+"</td><td>"+b.lastname+'</td><td class="hidden-xs">'+b.email+"</td></tr>";$("#user-lookup-results-table").append(c)});0==a.length&&$("#user-lookup-results-table").append('<tr><td colspan="4">No users were found</td></tr>');
b.prop("disabled",!1);$("#user-lookup-table").show()})}function AjaxUserLookupAdvancedSearch(a){return $.ajax({url:"/people/ownerlookup/"+a,type:"post",dataType:"json",cache:!1,data:{"user-lookup-first-name":$("#user-lookup-first-name").val(),"user-lookup-last-name":$("#user-lookup-last-name").val(),"user-lookup-role":$("#user-lookup-role").val(),CSRF_SESSION_TOKEN:CSRF_SESSION_TOKEN}})}
function selectUser(a,b){var c=lookupUsers[b];$("#user-lookup-value").val(a);$("#user-lookup-name").val(c.firstname+" "+c.lastname);$("#user-lookup-modal").modal("toggle")};
