function validateStep(a){clearErrors();switch(a){case 1:nextStep(1);break;case 2:validateTitle($("#confirmed-title"));validateShortDescription($("#confirmed-short-description"));validateFullDescription($("#confirmed-description"));validateBookingStartDate($("#confirmed-bookingstart"),$("#confirmed-startdate"),$("#confirmed-bookingend"));validateBookingEndDate($("#confirmed-bookingstart"),$("#confirmed-startdate"),$("#confirmed-bookingend"));validateStartDate($("#confirmed-startdate"),$("#confirmed-starttime"),
$("#confirmed-enddate"));validateEndDate($("#confirmed-enddate"),$("#confirmed-startdate"),$("#confirmed-starttime"),$("#confirmed-endtime"));nextStep(2);break;case 3:nextStep(3);break;case 4:validatePackageSize($("#package-size").val());validateTaxRate($("#tax-rate"));validatePricePerUnit($("#price-per-unit"));validateMinPlaces($("#min-units"));validateCostPerUnit($("#cost-per-unit"));validateCostToDeliver($("#cost-to-deliver"));validateMarketValue($("#market-value"));nextStep(4);break;case 8:$("#create-btn").prop("disabled",
!0),$("#create-btn").html("Creating..."),$.when(createEvent()).then(function(a){$("#media-manager").prop("href","/itemcreation/media/"+a.itemId);$("#create-btn").prop("disabled",!1);nextStep(8)})}}function createEvent(){loader(!0);return $.ajax({url:"/itemcreation/ajaxCreateArranged",type:"post",dataType:"json",cache:!1,data:$("#item-creation-form").serialize()})}function validateTitle(a){a=a.val().length;(5>a||100<a)&&errors.push("The title must be between 5 and 100 characters")}
function validateShortDescription(a){a=a.val().length;(5>a||300<a)&&errors.push("The short description must be between 5 and 300 characters")}function validateFullDescription(a){tinyMCE.triggerSave();a=a.val().length;(5>a||1E4<a)&&errors.push("The description must be greater than 5 characters")}
function validateStartDate(a,c,b){if(""!=a.val()||""!=c.val())if(/^(2[0-3]|1[0-9]|0[0-9]|[^0-9][0-9]):([0-5][0-9]|[0-9])$/.test(c.val())||errors.push("The event start time is not valid, 24 hour format is required e.g. 09:00 or 23:00"),c=new moment(a.val()+" "+c.val(),"DD/MM/YYYY HH:mm"),c.isValid()){var d=new moment;c.isBefore(d,"day")&&errors.push("Start date cannot be in the past")}else errors.push("You must provide a valid start date");""==b.val()&&""!=a.val()&&errors.push("If you are providing an event start date please also supply a valid event end date")}
function validateEndDate(a,c,b,d){if(""!=a.val()||""!=d.val())/^(2[0-3]|1[0-9]|0[0-9]|[^0-9][0-9]):([0-5][0-9]|[0-9])$/.test(d.val())||errors.push("The event end time is not valid, 24 hour format is required e.g. 09:00 or 23:00"),d=new moment(a.val()+" "+d.val(),"DD/MM/YYYY HH:mm"),b=new moment(c.val()+" "+b.val(),"DD/MM/YYYY HH:mm"),d.isValid()&&b.isValid()?d.isBefore(b,"minute")&&errors.push("End date cannot be before the start date"):d.isValid()||errors.push("You must provide a valid end date");
""==c.val()&&""!=a.val()&&errors.push("If you are providing an event end date please also supply a valid event start date")}
function validateBookingStartDate(a,c,b){a=new moment(a.val(),"DD/MM/YYYY");var d=new moment(b.val(),"DD/MM/YYYY"),e=new moment(c.val(),"DD/MM/YYYY");a.isValid()?(""!=c.val()&&(a.isSame(e,"day")||a.isAfter(e,"day"))&&errors.push("The booking start date must be before the event start date"),""!=b.val()&&a.isAfter(d,"day")&&errors.push("The booking start date must be before the booking end date")):errors.push("You must provide a valid booking start date")}
function validateBookingEndDate(a,c,b){if(""!=b.val()){a=new moment(a.val(),"DD/MM/YYYY");b=new moment(b.val(),"DD/MM/YYYY");var d=new moment(c.val(),"DD/MM/YYYY");b.isValid()?(""!=c.val()&&(b.isSame(d,"day")||b.isAfter(d,"day"))&&errors.push("The booking end date must be before the event start date"),b.isBefore(a,"day")&&errors.push("The booking end date must be after the booking start date")):errors.push("You must provide a valid booking end date")}}
function validateAddress(a){""==a.val()&&errors.push("Please select an address")}function validateMinPlaces(a){""!=a.val()&&(0!=a.val()%1||isNaN(a.val())||""==a.val())&&errors.push("Minimum Spaces must be a whole number")}function validatePackageSize(a){""!=a&&(isNaN(a)||""==a||1>a?errors.push("Spaces per Package must be a whole number and greater than 0"):0!=a%1&&errors.push("Spaces per Package must be a whole number"))}
function validatePricePerUnit(a){isNaN(a.val())?errors.push("The Price per Package must be a number"):0<a.val()&&.5>a.val()&&errors.push("The Price per Package if provided at this stage, must be 0 or higher than 0.50")}function validateCostPerUnit(a){""!=a.val()&&isNaN(a.val())&&errors.push("The Cost per Attendee must be a number")}function validateCostToDeliver(a){""!=a.val()&&isNaN(a.val())&&errors.push("The Static Costs must be a number")}
function validateMarketValue(a){""!=a.val()&&isNaN(a.val())&&errors.push("The Compliance Value must be a number")}function validateTaxRate(a){""!=a.val()&&(a=parseFloat(a.val()),(isNaN(a)||3<a.precision()||0>a||100<a)&&errors.push("Tax rate must be a valid percentage between 0 and 100 with a maximum precision of 3 decimal places"))};
