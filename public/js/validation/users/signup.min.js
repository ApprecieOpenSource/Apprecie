var steps=0,stepper=0;function setSteps(a){steps=a;stepper=100/steps}function setStep(a){clearErrors();a==steps?(loader(!0),$("#complete-btn").prop("disabled",!0),$("#complete-btn").html("Loading..."),$.when(updateUser()).then(function(b){loader(!1);$(".step").hide();$("#step-"+a).show()})):($(".step").hide(),$("#step-"+a).show())}
function validateStep(a){clearErrors();switch(a){case 2:ValidateFullUser($("#firstname").val(),$("#lastname").val(),$("#emailaddress").val());ValidateUserDateOfBirth($("#dob-formatted").val());validateTelephoneNumber($("#phone").val())||errors.push("The telephone number can only contain digits");validateTelephoneNumber($("#mobile").val())||errors.push("The mobile number can only contain digits");break;case 6:validatePassword($("#password").val(),$("#confirm-password").val()),validateTerms($("#i-agree"))}0==
errors.length?setStep(a+1):displayErrors()}function validatePassword(a,b){""==a||null==a||""==b||null==b?errors.push("You must provide a password"):a!=b?errors.push("Password and confirm password do not match"):8>a.length||25<a.length?errors.push("Password must be between 8 and 25 characters"):a.match(/([a-zA-Z])/)&&a.match(/([0-9])/)||errors.push("Password must include at least one number and one letter")}
function validateTerms(a){a.is(":checked")||errors.push("You must agree to the terms and conditions and privacy policy")}function ValidateFullUser(a,b,c){""!=a&&null!=a||errors.push("You must provide your first name");""!=b&&null!=b||errors.push("You must provide your last name");validateEmail(c)||errors.push("Please enter a valid email address")}
function ValidateUserDateOfBirth(a){""!=a&&(a=new moment(a,"DD-MM-YYYY"),a.isValid()?(18>moment().diff(a,"years")||120<moment().diff(a,"years"))&&errors.push("User must be aged 18 or over"):errors.push("Invalid date of birth entered (DD/MM/YYYY)"))}function updateUser(){return $.ajax({url:"/signup/ajaxupdateuser",type:"post",dataType:"json",cache:!1,data:$("#user-form").serialize()})}
function verifyUser(){return $.ajax({url:"/signup/ajaxverifyuser",type:"post",dataType:"json",cache:!1,data:{emailaddressx:$("#emailaddressx").val(),token:$("#token").val(),CSRF_SESSION_TOKEN:CSRF_SESSION_TOKEN}})};
